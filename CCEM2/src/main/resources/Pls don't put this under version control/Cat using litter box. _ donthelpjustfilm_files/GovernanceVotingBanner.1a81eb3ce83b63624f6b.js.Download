(window.webpackJsonp=window.webpackJsonp||[]).push([["GovernanceVotingBanner"],{"./src/reddit/components/Governance/VotingBanner/index.m.less":function(e,t,n){e.exports={bannerTitle:"_2RlUIqHbJhtqBPVOWc9EIl",button:"v2IDimagf9R1V7C7SahRI",container:"_1hs-SYfOXsOvtGLvgYSGq",flexRow:"_1Q5pm9fTTP3El8OlDEZLem",controls:"_-9zD1vVqEYmUMZcelQho0",content:"t61e4NmTLweNDu9wA2hM6",cta:"_1aUSA6nx3p-1LER33aE5sM",description:"_2JKRsNNJ0TUIpOpUjXAkpL",glowInner:"xB16-1ZjXRo4UiBMlYtPy",glowAnimationInner:"_3STmIEeB0QCC1Re7XiJe-_",glowOuter:"_1kAC_-k9cYMPGSTdijNoI2",glowAnimationOuter:"_3XZ0cG3H3WJKDt_a_msBqN",govIcon:"_1U_LKqjH8Y6XwWtdOJK2Ma",inner:"mRG6WomZbOvrz4BzzTv_A",postTitle:"-fXFhjjEdrS0uDz5V8nQG",redditIconContainer:"_1cp4bjnJiK5Xlg8tlgnJHc",redditIcon:"_3Etrkn9wjZNA84PFTPQ1H1"}},"./src/reddit/components/Governance/VotingBanner/index.tsx":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/react/index.js"),r=n.n(s),a=n("./node_modules/react-motion/lib/react-motion.js"),o=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/reselect/es/index.js"),c=n("./src/app/strings/index.ts"),l=n("./src/lib/constants/index.ts"),d=n("./src/lib/localStorageAvailable/index.ts"),m=n("./src/reddit/contexts/ApiContext.tsx"),p=n("./src/reddit/contexts/PageLayer/index.tsx"),u=n("./src/lib/lessComponent.tsx"),b=n("./src/reddit/controls/Button/index.tsx"),v=n("./src/reddit/controls/Button/index.m.less"),g=n.n(v);const x=u.a.wrapped(b.m,"InvertedPrimaryRouterLink",g.a),O=u.a.wrapped(b.l,"InvertedTertiaryButton",g.a);var h=n("./src/reddit/endpoints/governance/poll.ts"),j=n("./src/reddit/featureFlags/component.tsx"),f=n("./src/reddit/helpers/overlay/index.ts"),w=n("./src/reddit/i18n/components.tsx"),E=n("./src/reddit/icons/svgs/GovSmall/index.tsx"),y=n("./src/reddit/icons/svgs/Snoo/index.tsx"),_=n("./src/reddit/selectors/gov.ts"),I=n("./src/reddit/selectors/user.ts"),N=n("./src/reddit/components/Governance/VotingBanner/index.m.less"),S=n.n(N);const B=100,T=[{key:"banner",style:{bottom:Object(a.spring)(0)}}];function P(e){return`governance-banner-${e}`}function k(e){if(!e)return!0;if(!Object(d.a)())return!0;const t=P(e.id),n=localStorage.getItem(t);if(!n)return!1;const s=new Date(n).getTime();return Date.now()-l.w<s}const C=Object(i.c)({assets:(e,t)=>{const n=Object(p.s)(e,t);if(n)return Object(_.g)(e,{subredditId:n?n.id:void 0})},language:I.T,subreddit:p.s}),D=Object(o.b)(C,e=>({onOpenPoll:e=>{}})),G=Object(p.w)();t.default=Object(j.a)("spGovPolls",G(Object(m.b)(D(class extends r.a.Component{constructor(){super(...arguments),this.state={postTitle:"",postUrl:"",showBanner:!1},this.dismissBanner=(()=>{this.setState({showBanner:!1})}),this.saveDismissState=(()=>{Object(d.a)()&&this.props.subreddit&&localStorage.setItem(P(this.props.subreddit.id),(new Date).toISOString())}),this.willEnter=(()=>({bottom:-B})),this.willLeave=(()=>({bottom:Object(a.spring)(-B)}))}async componentDidMount(){if(k(this.props.subreddit)||!Object(d.a)())return;const e=function(e){if(e&&e.pinnedPolls){const t=Object.keys(e.pinnedPolls)[0];if(t)return e.pinnedPolls.content[t].postId}}(this.props.assets);if(e){const t=await Object(h.a)(this.props.apiContext(),e);t.ok&&this.setState({postTitle:t.body.title,postUrl:t.body.url,showBanner:!0})}}render(){if(k(this.props.subreddit)||!this.props.subreddit)return null;var e=this.props;const t=e.subreddit,n=e.language;return r.a.createElement(a.TransitionMotion,{defaultStyles:[],didLeave:this.saveDismissState,styles:this.state.showBanner?T:[],willEnter:this.willEnter,willLeave:this.willLeave},e=>r.a.createElement(s.Fragment,null,e.map(e=>r.a.createElement("div",{className:S.a.container,key:e.key,style:e.style},r.a.createElement("div",{className:S.a.inner},r.a.createElement("div",{className:S.a.content},r.a.createElement("div",{className:S.a.redditIconContainer},r.a.createElement(y.a,{className:S.a.redditIcon}),r.a.createElement("div",{className:S.a.glowInner}),r.a.createElement("div",{className:S.a.glowOuter})),r.a.createElement("div",{className:S.a.description},r.a.createElement("div",{className:S.a.cta},Object(c.a)(n,"gov.voteCta",{subredditName:t.displayText})),r.a.createElement("div",{className:S.a.postTitle},this.state.postTitle))),r.a.createElement("div",{className:S.a.controls},r.a.createElement(O,{className:S.a.button,onClick:this.dismissBanner},r.a.createElement(w.c,null,"later")),r.a.createElement(x,{className:S.a.button,to:Object(f.b)(this.state.postUrl),onClick:this.dismissBanner},r.a.createElement(E.a,{className:S.a.govIcon}),r.a.createElement(w.c,null,"vote"))))))))}}))))},"./src/reddit/featureFlags/component.tsx":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var s=n("./node_modules/react/index.js"),r=n.n(s),a=n("./node_modules/react-redux/es/index.js"),o=n("./node_modules/reselect/es/index.js"),i=n("./src/reddit/featureFlags/index.ts"),c=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};function l(e,t,n){const s=Object(o.c)({featureEnabled:t=>i.d[e](t)});return Object(a.b)(s)(e=>{const s=e.featureEnabled,a=(e.dispatch,c(e,["featureEnabled","dispatch"]));return s?r.a.createElement(t,Object.assign({},a)):void 0!==n?r.a.createElement(n,Object.assign({},a)):null})}}}]);
//# sourceMappingURL=GovernanceVotingBanner.1a81eb3ce83b63624f6b.js.map